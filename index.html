<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday, My Love!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body, html {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
      font-family: 'Arial', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .animated-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: linear-gradient(45deg, #ff9a9e, #fad0c4, #ffd1ff);
      background-size: 400% 400%;
      animation: gradientMove 8s ease infinite;
    }
    @keyframes gradientMove {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .heart-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    .floating-heart {
      position: absolute;
      color: #ff6b9d;
      font-size: 20px;
      animation: floatUp 6s infinite linear;
      opacity: 0.8;
    }
    @keyframes floatUp {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }
    .gift-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: opacity 0.5s ease;
    }
    .gift-container {
      text-align: center;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .gift-container:hover {
      transform: scale(1.05);
    }
    .animated-gift {
      width: 150px;
      height: 150px;
      margin: 0 auto 20px;
      position: relative;
      animation: bounce 2s infinite;
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
      }
      40% {
        transform: translateY(-15px);
      }
      60% {
        transform: translateY(-7px);
      }
    }
    .gift-box {
      width: 100px;
      height: 100px;
      background: linear-gradient(135deg, #ff6b9d, #ff8a80);
      border-radius: 10px;
      position: relative;
      margin: 25px auto;
      box-shadow: 0 10px 30px rgba(255, 107, 157, 0.3);
      transition: all 0.5s ease;
    }
    .gift-lid {
      width: 110px;
      height: 20px;
      background: linear-gradient(135deg, #ff8a80, #ff6b9d);
      border-radius: 15px 15px 5px 5px;
      position: absolute;
      top: -10px;
      left: -5px;
      transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    .ribbon-v {
      width: 15px;
      height: 120px;
      background: linear-gradient(to bottom, #ffd700, #ffed4e);
      position: absolute;
      left: 50%;
      top: -10px;
      transform: translateX(-50%);
      border-radius: 3px;
      transition: all 0.5s ease;
    }
    .ribbon-h {
      width: 120px;
      height: 15px;
      background: linear-gradient(to right, #ffd700, #ffed4e);
      position: absolute;
      left: 50%;
      top: 42.5px;
      transform: translateX(-50%);
      border-radius: 3px;
      transition: all 0.5s ease;
    }
    .bow {
      width: 30px;
      height: 20px;
      background: #ffd700;
      border-radius: 50%;
      position: absolute;
      left: 50%;
      top: -5px;
      transform: translateX(-50%);
      transition: all 0.5s ease;
    }
    .bow::before,
    .bow::after {
      content: '';
      width: 15px;
      height: 15px;
      background: #ffd700;
      border-radius: 50% 50% 50% 0;
      position: absolute;
      top: 2.5px;
    }
    .bow::before {
      left: -8px;
      transform: rotate(-45deg);
    }
    .bow::after {
      right: -8px;
      transform: rotate(135deg);
    }
    .gift-text {
      color: white;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      animation: glow 2s infinite alternate;
      margin-top: 20px;
    }
    @keyframes glow {
      from {
        text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #ff6b9d;
      }
      to {
        text-shadow: 0 0 20px #fff, 0 0 30px #ff6b9d, 0 0 40px #ff6b9d;
      }
    }
    .gift-opened .gift-lid {
      transform: translateY(-30px) rotateX(-45deg);
    }
    .gift-opened .ribbon-v,
    .gift-opened .ribbon-h,
    .gift-opened .bow {
      opacity: 0;
      transform: scale(0);
    }
    .main-content {
      display: none;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 10;
    }
    .header {
      text-align: center;
      margin: 40px 0;
    }
    .header h1 {
      font-size: 3em;
      color: #fff;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      margin-bottom: 20px;
      animation: heartbeat 2s infinite;
    }
    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .romantic-text {
      background: rgba(255, 255, 255, 0.9);
      padding: 30px;
      border-radius: 20px;
      color: #d63384;
      font-size: 1.4em;
      line-height: 1.8;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
      margin: 30px auto;
      max-width: 700px;
    }
    .slideshow-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 50px 0;
      gap: 20px;
    }
    .slideshow {
      width: 600px;
      height: 400px;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    }
    .slide {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }
    .slide.active {
      opacity: 1;
    }
    .nav-btn {
      background: linear-gradient(135deg, #ff6b9d, #d63384);
      color: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(214, 51, 132, 0.4);
    }
    .nav-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 25px rgba(214, 51, 132, 0.6);
    }
    .cake-section {
      text-align: center;
      margin: 60px 0;
      position: relative;
    }
    .cake-animation {
      width: 200px;
      height: 200px;
      margin: 0 auto 30px;
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
      animation: cakeFloat 3s ease-in-out infinite;
      box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
      z-index: 2;
    }
    @keyframes cakeFloat {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-10px) scale(1.05); }
    }
    .action-btn {
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      color: #d63384;
      border: none;
      padding: 15px 30px;
      margin: 10px;
      border-radius: 25px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
    }
    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(255, 154, 158, 0.6);
    }
    .confetti-piece {
      position: fixed;
      width: 10px;
      height: 10px;
      background: #ff6b9d;
      animation: confettiFall 3s linear;
      pointer-events: none;
      z-index: 1000;
    }
    @keyframes confettiFall {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    .firework {
      position: fixed;
      pointer-events: none;
      z-index: 1000;
    }
    .firework::before {
      content: '';
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: #ff6b9d;
      animation: fireworkExplosion 1s ease-out;
    }
    @keyframes fireworkExplosion {
      0% {
        transform: scale(0);
        opacity: 1;
      }
      100% {
        transform: scale(20);
        opacity: 0;
      }
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      max-width: 90%;
      position: relative;
    }
    .close {
      position: absolute;
      right: 15px;
      top: 10px;
      font-size: 30px;
      cursor: pointer;
      color: #d63384;
    }
    /* KNIFE ANIMATION for cake cut */
    .knife-anim {
      position: fixed;
      top: -100px;
      left: 50%;
      transform: translateX(-50%) rotate(-45deg);
      font-size: 80px;
      z-index: 10001;
      pointer-events: none;
      animation: knifeDrop 0.7s cubic-bezier(.29,1.01,.97,.06) forwards, knifeSlice 0.7s ease 0.7s forwards, knifeFade 0.5s ease 1.4s forwards;
    }
    @keyframes knifeDrop {
      0% { top: -100px; }
      100% { top: 68%; }
      /* Increase % for lower knife drop (change as needed) */
    }
    @keyframes knifeSlice {
      0% { left: 50%; }
      100% { left: 67%; }
      /* End further right for an angled slice */
    }
    @keyframes knifeFade {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }
    @media (max-width: 768px) {
      .slideshow {
        width: 90vw;
        height: 60vw;
        max-height: 300px;
      }
      .header h1 {
        font-size: 2em;
      }
      .romantic-text {
        font-size: 1.2em;
        padding: 20px;
      }
      .nav-btn {
        width: 40px;
        height: 40px;
        font-size: 16px;
      }
      .cake-animation {
        font-size: 50px;
        width: 110px;
        height: 110px;
      }
      .knife-anim {
        font-size: 45px;
      }
    }
  </style>
</head>
<body>
  <div class="animated-bg"></div>
  <div class="heart-container" id="heart-container"></div>

  <!-- Gift Modal -->
  <div class="gift-modal" id="gift-modal">
    <div class="gift-container" id="gift-container">
      <div class="animated-gift" id="animated-gift">
        <div class="gift-box">
          <div class="gift-lid"></div>
          <div class="ribbon-v"></div>
          <div class="ribbon-h"></div>
          <div class="bow"></div>
        </div>
      </div>
      <div class="gift-text">🎁 Click to Open Your Gift! 🎁</div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content" id="main-content">
    <div class="header">
      <h1>💖 Happy Birthday, My Love! 💖</h1>
      <div class="romantic-text">
        <strong>For you, my heart is forever.</strong><br><br>
        The very first time I saw your eyes, and then saw you, my heart got completely out of control—racing, beating, living just for you. You are my everything, my eternal love, my beautiful dream come true. Every moment with you feels like a fairytale, and today we celebrate you, my queen! 👑💕
      </div>
    </div>

    <!-- Slideshow -->
    <div class="slideshow-container">
      <button class="nav-btn" id="prev-btn">❮</button>
      <div class="slideshow" id="slideshow">
        <img src="images/PS_00274.JPG" class="slide active" alt="Beautiful Memory 1">
        <img src="images/PS_09811.JPG" class="slide" alt="Beautiful Memory 2">
        <img src="images/PS_09861.JPG" class="slide" alt="Beautiful Memory 3">
        <img src="images/PS_09882.JPG" class="slide" alt="Beautiful Memory 4">
        <img src="images/PS_00038.JPG" class="slide" alt="Beautiful Memory 5">
      </div>
      <button class="nav-btn" id="next-btn">❯</button>
    </div>

    <!-- Cake Section -->
    <div class="cake-section">
      <div class="cake-animation">🎂</div>
      <button class="action-btn" id="cut-cake-btn">🍰 Cut the Cake 🍰</button>
      <button class="action-btn" id="play-song-btn">🎵 Play Birthday Song 🎵</button>
    </div>
  </div>

 <!-- Video Modal -->
<div class="modal" id="video-modal">
  <div class="modal-content">
    <span class="close" id="close-modal">×</span>
    <iframe 
      id="birthday-video" 
      width="500" 
      height="315" 
      src="https://www.youtube.com/embed/fYOXe4Nccec" 
      title="YouTube video player" 
      frameborder="0" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
      allowfullscreen>
    </iframe>
  </div>
</div>

  <script>
    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', function() {
      createFloatingHearts();
      setupGiftBox();
    });

    // Create floating hearts
    function createFloatingHearts() {
      const heartContainer = document.getElementById('heart-container');
      const hearts = ['💖', '💕', '💗', '💝', '🌹', '✨'];
      function addHeart() {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (4 + Math.random() * 3) + 's';
        heart.style.fontSize = (15 + Math.random() * 10) + 'px';
        heartContainer.appendChild(heart);
        setTimeout(() => {
          heart.remove();
        }, 7000);
      }
      setInterval(addHeart, 500);
    }

    // Setup gift box
    function setupGiftBox() {
      const giftContainer = document.getElementById('gift-container');
      giftContainer.addEventListener('click', openGift);
      // Add some sparkle effect
      setInterval(() => {
        createSparkle();
      }, 300);
    }

    function createSparkle() {
      const sparkle = document.createElement('div');
      sparkle.innerHTML = '✨';
      sparkle.style.position = 'fixed';
      sparkle.style.left = (Math.random() * 100) + '%';
      sparkle.style.top = (Math.random() * 100) + '%';
      sparkle.style.fontSize = (10 + Math.random() * 10) + 'px';
      sparkle.style.pointerEvents = 'none';
      sparkle.style.zIndex = '999';
      sparkle.style.animation = 'fadeOut 2s ease-out forwards';
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 2000);
    }
    // Add fadeOut keyframes
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeOut {
        0% { opacity: 1; transform: scale(0) rotate(0deg); }
        50% { opacity: 1; transform: scale(1) rotate(180deg); }
        100% { opacity: 0; transform: scale(0) rotate(360deg); }
      }
    `;
    document.head.appendChild(style);

    function openGift() {
      const giftModal = document.getElementById('gift-modal');
      const mainContent = document.getElementById('main-content');
      const animatedGift = document.getElementById('animated-gift');
      animatedGift.classList.add('gift-opened');
      playOpenSound();
      createExplosion();
      setTimeout(() => {
        giftModal.style.opacity = '0';
        setTimeout(() => {
          giftModal.style.display = 'none';
          mainContent.style.display = 'block';
          requestFullscreen();
          initializeMainContent();
          playBackgroundMusic();
        }, 500);
      }, 1500);
    }
    function playOpenSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
      oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.1);
      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.1);
    }
    function createExplosion() {
      for (let i = 0; i < 50; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti-piece';
          confetti.style.left = (45 + Math.random() * 10) + '%';
          confetti.style.top = '50%';
          confetti.style.background = ['#ff6b9d', '#ffd700', '#ff8a80', '#ba68c8'][Math.floor(Math.random() * 4)];
          confetti.style.transform = `translate(-50%, -50%) rotate(${Math.random() * 360}deg)`;
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }, i * 20);
      }
      for (let i = 0; i < 10; i++) {
        setTimeout(() => createFirework(), i * 200);
      }
    }
    function createFirework() {
      const firework = document.createElement('div');
      firework.className = 'firework';
      firework.style.left = Math.random() * 100 + '%';
      firework.style.top = Math.random() * 50 + '%';
      document.body.appendChild(firework);
      setTimeout(() => firework.remove(), 1000);
    }
    function requestFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) {
        elem.requestFullscreen().catch(console.log);
      } else if (elem.webkitRequestFullscreen) {
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) {
        elem.msRequestFullscreen();
      }
    }
    let currentSlide = 0;
    let slideInterval;
    function initializeMainContent() {
      setupSlideshow();
      setupButtons();
    }
    function setupSlideshow() {
      const slides = document.querySelectorAll('.slide');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      prevBtn.addEventListener('click', () => {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
        createFirework();
      });
      nextBtn.addEventListener('click', () => {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
        createFirework();
      });
      slideInterval = setInterval(() => {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
      }, 5000);
    }
    function showSlide(index) {
      const slides = document.querySelectorAll('.slide');
      slides.forEach((slide, i) => {
        slide.classList.toggle('active', i === index);
      });
    }
    function setupButtons() {
      document.getElementById('cut-cake-btn').addEventListener('click', cutCake);
      document.getElementById('play-song-btn').addEventListener('click', playSong);
      document.getElementById('close-modal').addEventListener('click', closeModal);
    }

    // --------- KNIFE ANIMATION STARTS HERE ----------
    function cutCake() {
      // Play cutting sound
      playCutSound();

      // Spawn falling knife
      const knife = document.createElement('div');
      knife.className = 'knife-anim';
      knife.innerText = '🔪';
      document.body.appendChild(knife);

      // Change cake emoji to a cake slice
      setTimeout(() => {
        const cake = document.querySelector('.cake-animation');
        if (cake) cake.innerText = '🍰';
      }, 1150); // after the knife lands

      // Remove knife after animation
      setTimeout(() => knife.remove(), 1900);

      // Your confetti + fireworks
      for (let i = 0; i < 100; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.textContent = ['🎉', '🍰', '🎂', '✨', '🌟'][Math.floor(Math.random() * 5)];
          confetti.style.position = 'fixed';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.top = '-50px';
          confetti.style.fontSize = (20 + Math.random() * 20) + 'px';
          confetti.style.animation = 'confettiFall 4s linear forwards';
          confetti.style.zIndex = '1000';
          confetti.style.pointerEvents = 'none';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 4000);
        }, i * 30);
      }
      for (let i = 0; i < 20; i++) {
        setTimeout(() => createFirework(), i * 100);
      }
    }
    // -------------------------------------------------

    function playCutSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
      oscillator.frequency.linearRampToValueAtTime(200, audioContext.currentTime + 0.2);
      gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.2);
    }
    function playSong() {
      document.getElementById('video-modal').style.display = 'flex';
      const video = document.getElementById('birthday-video');
      video.currentTime = 0;
      video.play();
    }
    function closeModal() {
      document.getElementById('video-modal').style.display = 'none';
      document.getElementById('birthday-video').pause();
    }
    function playBackgroundMusic() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      function playNote(frequency, startTime, duration, volume = 0.05) {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        oscillator.frequency.setValueAtTime(frequency, startTime);
        oscillator.type = 'sine';
        gainNode.gain.setValueAtTime(0, startTime);
        gainNode.gain.linearRampToValueAtTime(volume, startTime + 0.1);
        gainNode.gain.linearRampToValueAtTime(0, startTime + duration);
        oscillator.start(startTime);
        oscillator.stop(startTime + duration);
      }
      function playMelody() {
        const now = audioContext.currentTime;
        const notes = [523, 587, 659, 698, 784, 659, 523];
        notes.forEach((freq, i) => {
          playNote(freq, now + i * 0.5, 0.4);
        });
      }
      playMelody();
      setInterval(playMelody, 10000);
    }
  </script>
</body>
</html>
